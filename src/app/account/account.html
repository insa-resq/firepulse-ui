<div class="account-container">
  <h1>Mon compte</h1>

  <!-- User Info Section -->
  <div class="user-info-card">
    <div class="profile-header">
      <div class="avatar-container">
        @if (currentUser?.avatarUrl) {
        <img [src]="currentUser?.avatarUrl" alt="Photo de profil" class="avatar" />
        } @else {
        <div class="avatar-placeholder">
          {{ currentUser?.email?.charAt(0)?.toUpperCase() }}
        </div>
        }
      </div>
      <h2>Informations personnelles</h2>
    </div>
    <div class="info-row">
      <span class="label">Email:</span>
      <span class="value">{{ currentUser?.email }}</span>
    </div>
    <div class="info-row">
      <span class="label">Rôle:</span>
      <span class="value">{{ getRoleName(currentUser?.role || '') }}</span>
    </div>
    <div class="info-row">
      <span class="label">Caserne:</span>
      <span class="value">
        {{ stationName || 'Chargement...' }}
      </span>
    </div>
  </div>

  <!-- Edit Own Email Section -->
  <div class="edit-email-card">
    <h2>Modifier mon email</h2>
    <form (ngSubmit)="updateMyEmail()" #emailForm="ngForm">
      <div class="form-group">
        <label for="newEmail">Nouvel email:</label>
        <input type="email" id="newEmail" name="newEmail" [(ngModel)]="newEmail" required email />
      </div>
      <button type="submit" [disabled]="!emailForm.valid || isUpdating">
        {{ isUpdating ? 'Mise à jour...' : 'Mettre à jour' }}
      </button>
      @if (updateMessage) {
      <div class="message" [class.success]="updateSuccess" [class.error]="!updateSuccess">
        {{ updateMessage }}
      </div>
      }
    </form>
  </div>
</div>