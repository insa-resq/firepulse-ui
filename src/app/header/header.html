<nav class="navbar">
    <div class="title">
        <img src="/logo.png" alt="ResQ Logo"/>
        <span>ResQ</span>
    </div>

  <div class="links">
    @if(userService.currentUser){
      <a routerLink="/detection" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Détection</a>
      <a routerLink="/planning" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Planning</a>
    }
  </div>

  <div class="auth-area">
    <!-- Connecté -->
    @if(userService.currentUser){
      <div class="user-menu">
        @if(userIcon){
            <div class="user-icon">
                <img src="{{ userIcon }}" alt="avatar"/>
            </div>
        }
        <button
          class="user-btn"
          type="button"
          (click)="menuOpen = !menuOpen"
          aria-haspopup="true"
          [attr.aria-expanded]="menuOpen">
          <img src="{{ userService.currentUser.avatarUrl }}" alt="avatar" />
        </button>

        @if(menuOpen){
          <ul class="dropdown" role="menu">
            <li role="menuitem">
              <a routerLink="/account" (click)="menuOpen = false">Compte</a>
            </li>
            @if (userService.isAdmin()) {
              <li role="menuitem">
              <a routerLink="/administration" (click)="menuOpen = false">Gérer</a>
            </li>
            }
            <li role="menuitem" (click)="logout()">Déconnexion</li>
          </ul>
        }
      </div>
    }
  </div>
</nav>
